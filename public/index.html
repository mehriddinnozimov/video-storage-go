<!DOCTYPE html>

<body>
  <input type="file" id="input_file" />

  <script>
    async function main() {
      console.log("START")
      const input_file = document.getElementById("input_file")

      if (!input_file) return;

      input_file.addEventListener("change", async (e) => {
        try {

          const file = e.target.files[0]
          if (!file) return;

          const form = new FormData()
          form.append("file", file)

          const response = await fetch("http://localhost:4000/file", {
            method: "POST",
            body: form
          })

          console.log(response)
          console.log(await response.text())
        } catch (err) {
          console.log(err)
        }
      })
    }

    main()
  </script>
</body>